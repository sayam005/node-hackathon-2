<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Horrid Henry's Excuse Academy - Master the Art of Excuses! 😈</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #FF6B6B 0%, #4ECDC4 100%);
            min-height: 100vh;
            font-family: 'Arial', sans-serif;
        }
        .excuse-academy {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin: 40px auto;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            max-width: 1000px;
        }
        .academy-header {
            background: linear-gradient(45deg, #FF6B6B, #FF4757);
            color: white;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            margin-bottom: 30px;
        }
        .henry-quote {
            background: linear-gradient(45deg, #FFE082, #FFCC02);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            font-style: italic;
            font-weight: bold;
            color: #333;
            border-left: 5px solid #FF6B6B;
        }
        .excuse-category {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            transition: transform 0.3s ease;
            border: 2px solid transparent;
        }
        .excuse-category:hover {
            transform: translateY(-5px);
            border-color: #4ECDC4;
        }
        .category-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            border: none;
            border-radius: 50px;
            padding: 15px 25px;
            color: white;
            font-weight: bold;
            width: 100%;
            margin: 10px 0;
            transition: all 0.3s ease;
        }
        .category-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            color: white;
        }
        .excuse-result {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            display: none;
        }
        .guilt-response {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
        }
        .home-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.2);
            border: none;
            border-radius: 50px;
            padding: 10px 15px;
            color: white;
            text-decoration: none;
        }
        .henry-tips {
            background: linear-gradient(45deg, #4ECDC4, #44A08D);
            color: white;
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
        }
    </style>
</head>
<body>
    <a href="{{ url_for('mummy_pizza.index') }}" class="home-btn">
        <i class="fas fa-home"></i> Home
    </a>

    <div class="container">
        <div class="excuse-academy">
            <!-- Academy Header -->
            <div class="academy-header">
                <h1><i class="fas fa-mask"></i> Horrid Henry's Excuse Academy</h1>
                <p class="lead">Master the art of creative excuses! "But it's not fair!" 😈</p>
                <div class="mt-3">
                    <small><strong>Disclaimer:</strong> Inspired by every mischievous kid ever! Use responsibly! 😅</small>
                </div>
            </div>

            <!-- Henry's Opening Quote -->
            <div class="henry-quote">
                <h5>"Perfect Peter never gets in trouble for anything! But I've mastered the art of excuses!"</h5>
                <p class="mb-0">- Horrid Henry's Guide to Getting Out of Trouble 📚</p>
            </div>

            <!-- Excuse Categories -->
            <div class="row">
                <div class="col-lg-4 col-md-6">
                    <div class="excuse-category">
                        <div class="text-center">
                            <i class="fas fa-pizza-slice" style="font-size: 2rem; color: #FF6B6B; margin-bottom: 15px;"></i>
                            <h5>Food Ordering Excuses</h5>
                            <p class="text-muted">When you want to order food instead of cooking</p>
                            <button class="btn category-btn" onclick="generateExcuse('ordering_food')">
                                <i class="fas fa-lightbulb"></i> Generate Food Excuse
                            </button>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6">
                    <div class="excuse-category">
                        <div class="text-center">
                            <i class="fas fa-door-open" style="font-size: 2rem; color: #4ECDC4; margin-bottom: 15px;"></i>
                            <h5>Going Out Excuses</h5>
                            <p class="text-muted">Creative reasons for leaving the house</p>
                            <button class="btn category-btn" onclick="generateExcuse('going_out')">
                                <i class="fas fa-running"></i> Generate Going Out Excuse
                            </button>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6">
                    <div class="excuse-category">
                        <div class="text-center">
                            <i class="fas fa-moon" style="font-size: 2rem; color: #667eea; margin-bottom: 15px;"></i>
                            <h5>Late Night Excuses</h5>
                            <p class="text-muted">Why you came home late</p>
                            <button class="btn category-btn" onclick="generateExcuse('late_night')">
                                <i class="fas fa-clock"></i> Generate Late Excuse
                            </button>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6">
                    <div class="excuse-category">
                        <div class="text-center">
                            <i class="fas fa-gamepad" style="font-size: 2rem; color: #FF6B6B; margin-bottom: 15px;"></i>
                            <h5>Game Buying Excuses</h5>
                            <p class="text-muted">Why you need that new game</p>
                            <button class="btn category-btn" onclick="generateExcuse('buying_games')">
                                <i class="fas fa-gift"></i> Generate Game Excuse
                            </button>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6">
                    <div class="excuse-category">
                        <div class="text-center">
                            <i class="fas fa-film" style="font-size: 2rem; color: #4ECDC4; margin-bottom: 15px;"></i>
                            <h5>Movie/Date Excuses</h5>
                            <p class="text-muted">Creative date cover stories</p>
                            <button class="btn category-btn" onclick="generateExcuse('movie_date')">
                                <i class="fas fa-heart"></i> Generate Date Excuse
                            </button>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6">
                    <div class="excuse-category">
                        <div class="text-center">
                            <i class="fas fa-graduation-cap" style="font-size: 2rem; color: #667eea; margin-bottom: 15px;"></i>
                            <h5>Student Excuses</h5>
                            <p class="text-muted">Academic-related excuse mastery</p>
                            <button class="btn category-btn" onclick="generateExcuse('student_excuses')">
                                <i class="fas fa-book"></i> Generate Student Excuse
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Random Excuse Button -->
            <div class="text-center my-4">
                <button class="btn btn-lg" onclick="generateRandomExcuse()" 
                        style="background: linear-gradient(45deg, #FF6B6B, #4ECDC4); color: white; border: none; border-radius: 50px; padding: 20px 40px; font-weight: bold;">
                    <i class="fas fa-random"></i> SURPRISE ME! Random Excuse
                </button>
            </div>

            <!-- Excuse Result Display -->
            <div id="excuseResult" class="excuse-result">
                <h4><i class="fas fa-lightbulb"></i> Your Henry-Style Excuse:</h4>
                <div id="excuseText" class="h5 mb-3"></div>
                
                <div class="guilt-response">
                    <h6><i class="fas fa-shield-alt"></i> If Mummy Gets Suspicious:</h6>
                    <div id="guiltResponse"></div>
                </div>
                
                <div class="text-center mt-3">
                    <button class="btn btn-light" onclick="generateAnotherExcuse()">
                        <i class="fas fa-redo"></i> Generate Another
                    </button>
                    <button class="btn btn-outline-light" onclick="shareExcuse()">
                        <i class="fas fa-share"></i> Share Excuse
                    </button>
                </div>
            </div>

            <!-- Henry's Pro Tips -->
            <div class="henry-tips">
                <h4><i class="fas fa-crown"></i> Horrid Henry's Excuse Mastery Tips:</h4>
                <div class="row">
                    <div class="col-md-6">
                        <h6>✅ Henry's Golden Rules:</h6>
                        <ul>
                            <li>Always sound confident and innocent</li>
                            <li>Add educational benefits when possible</li>
                            <li>Use family/friend emergencies sparingly</li>
                            <li>Mix truth with creative exaggeration</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h6>❌ Avoid These Henry Mistakes:</h6>
                        <ul>
                            <li>Don't overuse the same excuse</li>
                            <li>Never blame Perfect Peter too obviously</li>
                            <li>Don't make excuses too unbelievable</li>
                            <li>Remember your previous stories!</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Famous Henry Quotes -->
            <div class="henry-quote">
                <h6>📜 Classic Henry Excuses:</h6>
                <div class="row text-start">
                    <div class="col-md-4">
                        <em>"It's not fair!"</em><br>
                        <small>- Universal Henry response</small>
                    </div>
                    <div class="col-md-4">
                        <em>"Perfect Peter did it!"</em><br>
                        <small>- Blame deflection master</small>
                    </div>
                    <div class="col-md-4">
                        <em>"But Muuuum!"</em><br>
                        <small>- Last resort plea</small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let currentCategory = '';

        // Generate excuse for specific category
        async function generateExcuse(category) {
            currentCategory = category;
            try {
                const response = await fetch(`/mummy-pizza/api/generate-bahana?type=${category}`);
                const data = await response.json();
                
                if (data.success) {
                    displayExcuse(data.excuse, data.guilt_response);
                } else {
                    alert('Henry is out of excuses! Try again! 😅');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Henry\'s excuse generator is broken! 😱');
            }
        }

        // Generate random excuse
        async function generateRandomExcuse() {
            const categories = ['ordering_food', 'going_out', 'late_night', 'buying_games', 'movie_date', 'student_excuses'];
            const randomCategory = categories[Math.floor(Math.random() * categories.length)];
            await generateExcuse(randomCategory);
        }

        // Generate another excuse in same category
        function generateAnotherExcuse() {
            if (currentCategory) {
                generateExcuse(currentCategory);
            } else {
                generateRandomExcuse();
            }
        }

        // Display excuse result
        function displayExcuse(excuse, guiltResponse) {
            document.getElementById('excuseText').innerHTML = excuse;
            document.getElementById('guiltResponse').innerHTML = guiltResponse;
            document.getElementById('excuseResult').style.display = 'block';
            
            // Scroll to result
            document.getElementById('excuseResult').scrollIntoView({ 
                behavior: 'smooth',
                block: 'center'
            });
        }

        // Share excuse
        function shareExcuse() {
            const excuse = document.getElementById('excuseText').textContent;
            const shareText = `Check out this Henry-style excuse: "${excuse}" 😈`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Horrid Henry Excuse',
                    text: shareText,
                    url: window.location.href
                });
            } else {
                navigator.clipboard.writeText(shareText).then(() => {
                    alert('Excuse copied to clipboard! Share Henry\'s wisdom! 📋');
                });
            }
        }

        // Add some fun interactions
        document.addEventListener('DOMContentLoaded', function() {
            // Add hover effects to category cards
            const categories = document.querySelectorAll('.excuse-category');
            categories.forEach((card, index) => {
                card.style.animation = `fadeInUp 0.6s ease forwards ${index * 0.1}s`;
                card.style.opacity = '0';
                card.style.transform = 'translateY(30px)';
            });
        });

        // CSS animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeInUp {
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>